---
title: ASN详解
tags: 未分类
---


------

***<font color=blue>版权声明</font>：本文参考了<font color=blue>。</font><font color=red>未经作者允许</font>，<font color=blue>严禁用于商业出版</font>，<font color=red>否则追究法律责任。转载请注明出处！！！</font>***

------

# 1 ASN简介 
ASN.1抽象语法标记（Abstract Syntax Notation One）是一种 ISO/ITU-T标准，描述了**一种对数据进行表示、编码、传输和解码的数据格式**。它提供了一整套正规的格式用于描述对象的结构，而不管语言上如何执行及这些数据的具体指代，也不用去管到底是什么样的应用程序。也就是说ASN.1**只包含信息结构，不处理具体业务数据，不是一个编程语言**。

在任何需要以数字方式发送信息的地方，ASN.1 都可以发送各种形式的信息（声频、视频、数据等等）。ASN.1 和特定的 ASN.1 编码规则推进了结构化数据的传输，尤其是网络中应用程序之间的结构化数据传输，它以一种独立于计算机架构和语言的方式来描述数据结构。

OSI应用层协议使用了ASN.1来描述它们所传输的PDU，包括：
* 用于传输电子邮件的X.400
* 用于目录服务的X.500
* 用于VoIP 的H.323 和SNMP
* 通用移动通信系统（UMTS）中的接入和非接入层

一种ASN.1数据类型对应的传输语法可以有多种，但只能使用其中的一种。

ASN.1 的描述可以容易地被映射成 C 或 C++ 或 Java 的数据结构，并可以被应用程序代码使用，并得到运行时程序库的支持。

ASN.1规范包括：ISO8824/ITU X.208（说明语法）和ISO8825/ITU X.209（说明基本编码规则）。

# 2 相关背景知识
## 2.1 基本概念：

**抽象语法**：定义了数据的常用结构（包括不同的数据类型），并且建立了和应用层对话所用的构架。指ASN.1，是协议采用ASN.1规范描述的描述文本。描绘了与任何表示数据的编码技术无关的通用数据结构。抽象语法使得人们能够定义数据类型，并指明这些类型的值。抽象语法只描述数据的结构形式，与具体的编码格式无关，同时也不涉及这些数据结构在计算机内如何存放。

**实际语法**：本地的，并且定义本地系统的数据表示方法。如C和Java。

**传输语法**：定义两个系统间的表示层间交换数据的表示方法，是实际通讯系统间的码流。当数据在两个表示层实体之间传输时，这些数据的实际比特模式表示方法就是传输语法。

**编码与解码**：指将抽象语言法转换成实际通讯系统间比特流。解码则相反。

**编解码规则**：提供从实际语法到传输语法和其相反操作的方法。(从抽象语法到传输语法，由ASN.1编译器按照编解码规则实现)。

ASN.1标准化编码规则：
* 基本编码规则（BER） X.209 
* 规范编码规则（CER）
* 识别名编码规则（DER）
* 压缩编码规则（PER）
* XML编码规则（XER）

这些编码规则描述了如何对 ASN.1 中定义的数值进行编码，以便用于传输，而不管计算机、编程语言或它在应用程序中如何表示等因素。ASN.1 的编码方法比许多与之相竞争的标记系统更先进，它支持可扩展信息快速可靠的传输。


## 2.2 应用层

应用层向表示层发送数据时，同时告知表示层自己的ASN.1名字(即对象标识符)，ASN.1名字标记了一个ASN.1语法——用以解释数据中各字段的含义。通过参考ASN.1定义，表示层可以得知数据单元的类型和长度，以及传输时应当采用的编码方法。

## 2.3 表示层

两个系统在传输数据前需要协商共用的编码方式，事实上编码方式在应用层发出的数据中已经确定，应用数据中包含抽象语法/传输语法的组合关系，告诉表示层数据的结构、含义以及传输语法规则。表示层参考抽象语法，将应用数据转换为传输语法定义的比特流。

## 2.4 边界对齐

同样一条消息，在计算机内存中是以Byte为单位存储的，在物理层则是以bit为单位传送的。

如果一个信元的第一个bit也恰好是Byte流中某Byte的开始bit时，我们称之为开始于边界对齐的；如果信元的最后一个bit也恰好是Byte流中某Byte的最后一个bit时，则可以称之为结束于边界对齐的。

对于不是结束于边界对齐的情况，一般要进行补位。有两种方式：
* 对每个信元的结束立即进行补位，保证下一个信元是开始于边界对齐的；
* 从信元结束的位置开始新的信元，到消息结束时再进行一次补位操作。(用于无线空口中)

## 2.5 大小端

(1).大端方式，也叫网络序，从左往右，第一个8位表示高位，例如0X0102,用比特流表示是0000000100000010。

(2).小端方式，也叫主机序，与大端方式相反，数字0X0102用比特流表示则是0000001000000001，低8位在前，高8位在后。

Motorola的PPC系列、IP协议中使用大端方式;VAX计算机、Intel的x86系列中使用小端方式。


------

***<font color=blue>版权声明</font>：本文参考了<font color=blue>。</font><font color=red>未经作者允许</font>，<font color=blue>严禁用于商业出版</font>，<font color=red>否则追究法律责任。转载请注明出处！！！</font>***

------
