---
title: RFC3261_6
tags: 新建,模板,小书匠
category: /小书匠/日记/2024-09
grammar_cjkRuby: true
---

# 6 定义


以下术语对SIP具有特殊意义。

***记录地址***（AOR， Address-of-Record） : 记录地址是一个SIP/SIPS URI，它指向具有位置服务的域，该服务可以将此URI映射到用户可能可用的另一个URI。典型的，位置服务是通过注册来填充的。AOR通常被认为是用户的“公共地址”。

***背靠背用户代理***（B2BUA， Back-to-Back User Agent）：背靠背用户代理是作为用户代理服务器（UAS）来接收请求并处理的逻辑实体。为了确定应该如何响应请求，它充当用户代理客户端（UAC）并生成请求。与代理服务器不同，它维护对话状态，并且必须参与在其建立的对话上发送的所有请求。由于它是UAC和UAS的串联，因此其行为不需要显式定义。

***呼叫***（Call）: 呼叫是一个非正式的术语，指的是对等方之间的一些通信，通常是为了多媒体对话而建立的。

**呼叫回合**（Call Leg）: 对话的另一个名称[^31]；本规范中不再使用。

***有状态呼叫***（Call Stateful）: 如果代理（proxy）保留从发起INVITE到终止BYE请求的对话的状态，那么它就是有状态呼叫。有状态呼叫代理（proxy）始终是事务有状态的，但反之不一定成立。

***客户端***（Client）: 客户端是发送SIP请求并接收SIP响应的任何网络元素。客户端可能直接与人类用户交互，也可能不直接与人类用户交互。UAC和Proxy都是客户端。

***会议***（Conference）: 包含多个参与者的多媒体会话（见下文）。

***核心***（Core）: 核心指定特定类型的SIP实体的特定功能，即特定于有状态或无状态代理、用户代理或注册器。除无状态代理之外，所有核心都是事务用户。

***对话***（Dialog）: 对话是两个UA之间持续一段时间的对等SIP关系。对话是通过SIP消息建立的，例如对INVITE请求的2xx响应。对话由呼叫标识符（Call identifier）、本地标签（local tag）和远程标记（remote tag）标识。在RFC2543中，对话以前称为呼叫回合（Call）。

***下游***（Downstream）: 事务内的消息转发方向，指请求从UAC流向UAS的方向。

***最终响应***（Final Response）: 终止SIP事务的响应，与临时响应相反。所有2xx、3xx、4xx、5xx和6xx响应均为最终响应。

***头部***（Header）: 头部是SIP消息的一个组件，它传递有关消息的信息。它的结构是一系列头部字段。

***头部字段***（Header Field）: 头部字段是SIP消息头部的一个组件。头部字段可以显示为一个或多个头部字段行。头部字段行由头部字段名称和零个或多个头部字段值组成。给定头部字段行上的多个头部字段值由逗号分隔。某些头部字段只能有一个头部字段值，因此始终显示为一个头部字段行。

***头部字段值***（Header Field Value）: 头部字段值为单个值；头部字段由零个或多个头部字段值组成。

***归属域***（Home Domain）: 向SIP用户提供服务的域。通常这域出现在注册的AOR的URI中。

***信息性响应***（Informational Response）: 与临时响应相同。

***发起方、呼叫方***（Initiator, Calling Party, Caller: ）: 使用INVITE请求发起会话（和对话）的一方。呼叫方从发送建立对话的初始INVITE时起一直保留此角色，直到该对话终止。

***邀请***（Invitation）: INVITE请求。

***受邀方、受邀用户、被叫方***（nvitee, Invited User, Called Party, Callee）: 为建立新会话而接收INVITE请求的一方。被叫方从收到INVITE起一直保留此角色，直到该INVITE建立的对话终止。

***位置服务***（Location Service）: SIP重定向或代理服务器使用位置服务来获取有关被叫方可能位置的信息。它包含AOR键与零个或多个联系人地址的绑定列表。这绑定可以通过多种方式创建和删除；此规范定义了更新绑定的REGISTER方法。

***循环***（Loop）: 到达代理的请求被转发，然后返回到同一代理。当它第二次到达时，其请求URI与第一次相同，并且影响代理操作的其他头字段不变，因此代理将对其第一次发出的请求做出相同的处理决策。循环请求是错误，协议描述了检测和处理它们的过程。

***松散路由***（Loose Routing）：如果代理遵循本规范中定义的处理Route头部字段的过程，则称为松散路由。这些过程将请求的目的地（出现在Request-URI中）与沿途需要访问的代理集合（出现在Route头部字段中）分开。符合这些机制的代理也被称为松散路由器。

***消息***（Message）：作为协议的一部分在SIP元素之间发送的数据。一个SIP消息是请求或响应中一种。
***方法***（Method）：方法是请求要在服务器上调用的主要功能。该方法包含在请求消息本身中。示例方法是INVITE 和 BYE。

***出站代理***（Outbound Proxy）：从客户端接收请求的代理，即使它可能不是由Request-URI解析出的服务器。典型地，UA通过手动配置出站代理，或者通过自动配置协议学习出站代理。

***并行搜索***（Parallel Search）：在并行搜索中，代理在接收到传入请求时向可能的用户位置发出多个请求。并行搜索不像顺序搜索那样发出一个请求，然后在发出下一个请求之前等待最终响应，而是在不等待前一个请求的结果的情况下发出请求。

***临时响应***（Provisional Response）：服务器用于指示进度的响应，它不会终止SIP事务。1xx响应为临时响应，其他响应为最终响应。

***代理，代理服务器***（Proxy, Proxy Server）: 作为服务器和客户端的中间实体，用于代表其他客户端发出请求。代理服务器主要扮演路由的角色，这意味着它的任务是确保将请求发送到距离目标用户“更近”的另一个实体。代理对于强制执行策略也很有用（例如，确保用户被允许进行呼叫）。如果需要，代理在转发请求消息之前会解释请求消息的特定部分，还会重写请求消息的特定部分。

***递归***（Recursion）：当客户端对响应的Contact头部字段中的一个或多个URI生成了新请求时，它在3xx响应上递归。

***重定向服务器***（Redirect Server）：重定向服务器是一个用户代理服务器，它对接收到的请求生成3xx响应，指示客户端联系另一组URI。

***注册器***（Registrar）：注册器是一个服务器，它接受REGISTER请求，并将在这些请求中接收到的信息放入它处理的域的位置服务中。

***常规事务***（Regular Transaction）：常规事务是使用INVITE、ACK或CANCEL以外的方法进行的任何事务。

***请求***（Request）：从客户端发送到服务器的SIP消息，用于调用特定操作。

***响应***（Response）：从服务器发送到客户端的SIP消息，用于指示从客户端发送到服务器的请求的状态。

***回铃***（Ringback）：回铃是主叫方应用程序发出的信号音，表示被叫方正在收到提醒（振铃）。

***路由集***（Route Set）：路由集是有序SIP/SIPS URI的集合，表示发送特定请求时必须遍历的代理列表。可以通过诸如Record-Route之类的头部来学习路由集，也可以对其进行配置。

***服务器***（Server）：服务器是一个网络元素，它接收请求以便为它们提供服务，并将响应发送回这些请求。服务器的示例包括代理、用户代理服务器、重定向服务器和注册器。

***顺序搜索***（Sequential Search）：在顺序搜索中，代理服务器按顺序尝试每个联系人地址，仅在前一个联系人地址生成最终响应后才继续下一个联系人地址。2xx或6xx类最终响应始终终止顺序搜索。

***会话***（Session）：来自SDP规范：“多媒体会话是一组多媒体发送方和接收方以及从发送方流向接收方的数据流。多媒体会议是多媒体会话的一个示例。”（RFC 2327[^1]）（SDP定义的会话可以包括一个或多个RTP会话。）如定义，可以通过不同的呼叫多次邀请被叫方参加同一会话。如果使用SDP，则会话由源字段中SDP用户名、会话id、网络类型、地址类型和地址元素串联起来定义。


***SIP事务***（SIP Transaction）：SIP事务发生在客户端和服务器之间，包括从客户端向服务器发送的第一个请求到从服务器向客户端发送的最终（非-1xx）响应的所有消息。如果请求是INVITE，而最终响应是非2xx，则事务还包括对响应的ACK。对于INVITE请求的2xx响应的ACK是一个单独的事务。

***螺旋***（Spiral）：螺旋是一个SIP请求，它被路由到一个代理，向前转发，然后再次到达该代理，但这次方式的不同将导致与原始请求不同的处理决策。典型地，这意味着请求的Request-URI与先前到达的Request-URI不同。与循环不同，螺旋不是错误条件。一个典型的原因是呼叫转移。用户呼叫joe@example.com. example.com代理将其转发给Joe的PC，而PC又将其转发给bob@example.com. 此请求被代理回example.com代理。然而，这不是一个循环。由于请求是针对不同的用户的，因此它被认为是螺旋，并且是有效的条件。

***有状态代理***（Stateful Proxy）：在处理请求期间维护本规范定义的客户端和服务器事务状态机的逻辑实体，也称为事务有状态代理。第16节进一步定义了有状态代理的行为。（事务）有状态代理与呼叫有状态代理不同。

***无状态代理***（Stateless Proxy）：在处理请求时不维护本规范中定义的客户端或服务器事务状态机的逻辑实体。无状态代理转发它在下游收到的每个请求和在上游收到的每个响应。

***严格路由***（Strict Routing）：如果代理遵循RFC 2543的路由处理规则以及此RFC的许多以前正在工作的版本，则称其为严格路由。该规则导致代理在存在Route头部字段时销毁Request-URI的内容。本规范中没有使用严格路由的行为，而是使用松散路由的行为。执行严格路由的代理也称为严格路由器。

***目标刷新请求***（Target Refresh Request）：在对话中发送的目标刷新请求被定义为可以修改对话的远程目标的请求。

***事务用户***（TU，Transaction User）：位于事务层之上的协议处理层。事务用户包括UAC核心、UAS核心和代理核心。

***上游***（Upstream）：事务内的消息转发方向，指响应从用户代理服务器流回到用户代理客户端的方向。

***URL编码***（URL-encoded）：根据RFC 2396第2.4节[^5]编码的字符串。

***用户代理客户端***（UAC，User Agent Client）：用户代理客户端是一个逻辑实体，它创建一个新请求，然后使用客户端事务状态机制发送请求。UAC的角色仅在该事务期间有效。换句话说，如果一个软件发起一个请求，它在该事务期间充当UAC。如果稍后收到请求，它将承担处理该事务的UAS角色。

***UAC核心***（UAC Core）：位于事务层和传输层之上的UAC所需的一组处理功能。

***用户代理服务器***（UAS， User Agent Server）：用户代理服务器是对SIP请求生成响应的逻辑实体。响应用于接受、拒绝或重定向请求。此角色仅在该事务期间有效。换句话说，如果一个软件对一个请求做出响应，它在该事务期间充当UAS。如果它稍后生成请求，它将承担处理该事务的UAC角色。

***UAS核心***（UA Core）：位于事务层和传输层之上的UAS所需的一组处理功能。

***用户代理***（UA，User Agent）：可以同时充当用户代理客户端和用户代理服务器的逻辑实体。

UAC和UAS以及代理服务器和重定向服务器的角色是在逐个事务的基础上定义的。例如，发起呼叫的用户代理在发送初始INVITE请求时充当UAC，在接收到来自被叫方BYE请求时充当UAS。类似地，相同的软件可以充当一个请求的代理服务器和下一个请求的重定向服务器。

上面定义的代理服务器、位置服务器和注册服务器是逻辑实体；实现可以将它们组合到单个应用程序中。