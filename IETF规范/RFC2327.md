---
title: RFC2327
tags: SDP, IETF
---


------

***<font color=blue>版权声明：</font>本文翻译自<font color=blue>《[RFC2327](https://www.ietf.org/rfc/rfc2327.txt)》。</font>协议更新时间为1998。<font color=red>本文与原文档采用相同的版权许可。</font><font color=blue>转载请注明出处！！！</font>***

------

**此备忘录的状态**

本文档为Internet社区指定了一个Internet标准跟踪协议，并请求讨论和改进建议。 请参阅“互联网官方协议标准”（STD 1）的当前版本，了解本协议的标准化状态。 本备忘录的分发不受限制。

**版权公告**

版权所有（C）互联网协会（1998年）。版权所有。

**摘要**

本文档定义了会话描述协议SDP。SDP用于描述多媒体会话以实现会话通告、会话邀请和其他形式的多媒体会话启动。

本文件是IETF（Internet Engineering Task Force）的MMUSIC（Multiparty Multimedia Session Control）工作组的产品。 请将意见发送至工作组邮件列表confctrl@isi.edu或作者。


# 1 引言
在Internet多播主干网（Mbone）上，会话目录工具用于宣传多媒体会议，并传达参加会议所需的会议地址和特定会议工具信息。本文档定义了用于此目的和一般实时多媒体会话描述目的的会话描述协议。本备忘录未详细描述多播地址分配或SDP消息的分发。这些在随附的备忘录中进行了描述。SDP不用于协商媒体编码。

# 2 背景

Mbone是支持IP多播的internet的一部分，因此允许高效的多对多通信。它广泛用于多媒体会议。这类会议通常具有这样的性质，即不需要紧密协调会议成员；要接收会议，Mbone站点的用户只需知道会议的多播组地址和会议数据流的UDP端口。

会议目录有助于宣传会议会话，并将相关会议设置信息传达给潜在与会者。SDP旨在向接收者传达此类信息。SDP纯粹是一种用于会话描述的格式——它不包含传输协议，并打算酌情使用不同的传输协议，包括会话公告协议(Session Announcement Protocol)[^4]、会话启动协议(Session Initiation Protocol)[^11]、实时流协议(Real-Time Streaming Protocol)[^12]、使用MIME扩展的电子邮件、以及超文本传输协议(Hypertext Transport Protocol)。

SDP是通用的，因此它可以用于更广泛的网络环境和应用程序，而不仅仅是多播会话目录。但是，它不支持会话内容或媒体编码的协商——这被视为超出了会话描述的范围。

# 术语表

以下术语在本文件中使用，在本文件的上下文中具有特定含义。

会议（Conference）
: 多媒体会议是由两个或两个以上的通信用户以及他们使用的通信软件组成的一组会议。

会话（Session）
: 多媒体会话是一组多媒体发送方和接收方以及从发送方流向接收方的数据流。 多媒体会议就是多媒体会话的一个例子。

会话广告（Session Advertisement）
: 见会话广告。

会话公告（Session Announcement）
: 会话公告是一种主动向用户传达会话描述的机制，即用户没有明确请求会话描述。

会话描述（Session Description）
: 会话描述一种定义好的格式，用于传递足够的信息以发现和参与多媒体会话。

## 3.1 术语

本文件中的关键词“**必须**”、“**不得**”、“**要求**”、“**应**”、“**不得**”、“**应**”、“**不应**”、“**建议**”、“**可**”和“**可选**”应按照RFC 2119中的说明进行解释。

>"MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"

# 4 SDP使用
## 4.1 多播公告
SDP是一种用于多媒体会话的会话描述协议。一种常见的使用模式是客户机通过使用SAP定期将公告数据包多播到已知的多播地址和端口来公告会议会话。

SAP数据包是具有以下格式的UDP数据包：
```text
         |--------------------|
         | SAP header         |
         |--------------------|
         | text payload       |
         |//////////</pre>
```

头部是SAP头部。SAP在附带备忘录中有更详细的描述[^4]。

如本备忘录所述，文本负载（text payload ）是SDP会话描述。文本有效负载的长度不应大于1 KB。如果由SAP发布，则单个数据包中只允许发布一次会话。


## 4.2 电子邮件和WWW公告

传达会话描述的替代方法包括电子邮件和万维网。对于电子邮件和WWW分发，应使用MIME内容类型“application/sdp”。这使得能够以标准方式从WWW客户端或邮件阅读器自动启动参与会话的应用程序。

请注意，仅通过电子邮件或万维网（WWW）进行的多播会话公告不具有会话公告的接收者必须能够接收会话的属性，因为多播会话可能在范围内受到限制，并且接受者也可能在此范围之外访问WWW服务器或接收电子邮件。SAP发布不会受到这种不匹配的影响。

# 5 要求和建议

SDP的目的是在多媒体会话中传送关于媒体流的信息，以允许会话描述的接收者参与会话。SDP主要用于互联网，尽管它具有足够的通用性，可以描述其他网络环境中的会议。

出于这些目的，多媒体会话被定义为存在一段时间的一组媒体流。媒体流可以是多对多。会话处于活动状态的时间不需要连续。

到目前为止，Internet上基于多播的会话不同于许多其他形式的会议，因为任何接收通信的人都可以加入会话（除非会话通信被加密）。在这样的环境中，SDP有两个主要目的。它是一种传达会话存在性的手段，也是一种传达足够信息以加入和参与会话的手段。在单播环境中，只有后一个目的可能是相关的。
因此，SDP包括：

- 会话名称和目的
- 会话处于活动状态的时间
- 组成会议的媒体
- 接收这些媒体的信息（地址、端口、格式等）

由于参加一次会议所需的资源可能有限，还需要一些额外的信息：

- 有关会议将使用的带宽的信息
- 会议负责人的联系信息

通常，SDP必须传递足够的信息，以便能够加入会话（加密密钥可能除外），并向可能需要知道的非参与者公告要使用的资源。

## 5.1 媒体信息
SDP包括：
 - 媒体类型（视频、音频等）
 - 传输协议（RTP/UDP/IP、H.320等）
 - 媒体格式（H.261视频、MPEG视频等）
   
对于IP多播会话，还传递以下信息：
- 媒体的多播地址
- 媒体传输端口
  
此地址和端口是多播流的目标地址和目标端口，无论是发送的还是接收的，或者两者都是。

对于IP单播会话，传达以下信息：

- 媒体的远程地址
- 联系人地址的传输端口

此地址和端口的语义取决于定义的媒体和传输协议。默认情况下，这是数据发送到的远程地址和远程端口，以及接收数据的远程地址和本地端口。然而，一些媒体可能定义为使用这些地址和端口来建立实际媒体流的控制通道。

## 5.2 定时信息

会话在时间上可以是有限制的，也可以是无限制的。无论它们是否有限制，它们可能仅在特定时间处于活动状态。

SDP可以传达：
- 会话限制的开始时间和停止时间的任意列表
- 对于每个限制，重复次数，如“每周三上午10点，持续一小时”

无论本地时区或夏令时如何，此计时信息都是全局一致的。

## 5.3 非公开会议

可以创建公共会话和私有会话。私有会话通常通过加密会话描述来分发。如何执行加密的详细信息取决于用于传递SDP的机制——有关会话公告的加密方式，请参见[^4]。

如果会话公告是私有的，则可以使用该私有公告来传送对会议中的每个媒体进行解码所需的加密密钥，包括足够的信息，以知道每个媒体使用哪种加密方案。

## 5.4 获取有关会话的进一步信息
会话描述应传达足够的信息，以决定是否参加会话。SDP可以包括通用资源标识符（URI）形式的附加指针，以获取关于会话的更多信息。

## 5.5 分类

当许多会话描述由SAP或任何其他广告机制分发时，可能需要从不感兴趣的公告中筛选感兴趣的公告。SDP支持会话的分类机制，该机制能够实现自动化。

## 5.6 国际化
SDP规范建议在UTF-8编码（RFC 2044）中使用ISO10646字符集，以允许表示多种不同的语言。然而，为了有助于紧凑表示，SDP还允许在需要时使用其他字符集，如ISO 8859-1。国际化仅适用于自由文本字段（会话名称和背景信息），而不适用于整个SDP。

# 6 SDP规范
SDP会话描述完全是使用UTF-8编码的ISO10646字符集的文本。SDP字段名和属性名仅使用UTF-8的US-ASCII子集，但文本字段和属性值可能使用完整的ISO 10646字符集。与ASN/1或XDR等二进制编码相反，选择文本形式是为了增强可移植性，以便能够使用各种传输（例如，MIME电子邮件消息中的会话描述），并允许使用灵活的、基于文本的工具包（例如，Tcl/Tk）来产生和处理会话描述。但是，由于分配给所有SAP公告的总带宽受到严格限制，因此编码特意紧凑。此外，由于公告可能通过非常不可靠的方式（如电子邮件）传输或被中间缓存服务器损坏，因此编码设计有严格的顺序和格式规则，以便会导致错误格式公告的大多数错误都很容易被检测到并丢弃。这还允许快速丢弃接收方没有正确密钥的加密公告。

SDP会话描述由许多行文本组成，其形式为`<type>=<value>`。`<type>`始终是一个字符，且大小写重要。`<value>`是一个结构化文本字符串，其格式取决于`<type>`。除非特定字段另有定义，否则它也具有大小写重要性。`“=”`符号两边都不允许有空格。通常，`<value>`是由单个空格字符或自由格式字符串分隔的多个字段。

会话描述包括会话级别描述（适用于整个会话和所有媒体流的详细信息）和可选的多个媒体级别描述（适用于单个媒体流的详细信息）。

公告由会话级部分和零个或多个媒体级部分组成。会话级部分以`“v=”`行开始，然后继续到第一个媒体级部分。媒体描述以`“m=”`行开始，然后继续到下一个媒体描述或整个会话描述的结尾。通常，会话级别的值是所有媒体的默认值，除非被等效媒体级别的值覆盖。

当SDP由SAP传输时，每个数据包只允许一个会话描述。当通过其他方式传输SDP时，许多SDP会话描述可以连接在一起（表示会话描述开始的`“v=”`行终止先前的描述）。有些行在每个描述中的都是必需的，有些行则是可选的，但所有行都必须完全按照此处给出的顺序出现（固定顺序大大增强了错误检测，并允许使用简单的解析器）。可选项用`“*”`标记。

```text
会话描述
        v=  (协议版本)
        o=  (创建者/所有者和会话标识).
        s=  (会话名字)
        i=* (会话信息)
        u=* (URI描述)
        e=* (email地址)
        p=* (电话号码)
        c=* (连接信息 - 如果在所有的媒体描述中包含了，则非必须)
        b=* (带宽信息)
        一个或多个时间描述 (见后面)
        z=* (时区调整)
        k=* (加密密钥)
        a=* (零个或多个会话属性行)
        0个或多个媒体描述 (零个或多个会话属性行)

时间描述
        t=  (会话处于活动状态的时间)
        r=* (零次或多次重复)

媒体描述
        m=  (媒体名称和传输地址)
        i=* (媒体标题)
        c=* (连接信息-如果包含在会话级，则为可选)
        b=* (带宽信息)
        k=* (加密密钥)
        a=* (零个或多个媒体属性行)
```

`“type”`字母的集合故意很小的，不可扩展——SDP解析器必须完全忽略任何包含它不理解的`“type”`字母的公告。`“attribute”`机制（如下所述`“a=”`）是扩展或裁剪SDP并使其适应特定应用程序或媒体的主要手段。某些属性（本文档中列出的属性）具有定义的含义，而其他属性可以根据应用程序、媒体或会话的具体情况添加。会话目录必须忽略它不理解的任何属性。

会话级别部分中的连接（`“c=”`）和属性（`“a=”`）信息适用于该会话的所有媒体，除非被媒体描述中的同名属性覆盖。例如，在下面的示例中，每个媒体的行为就好像它被赋予了`“recvonly”`属性一样。
SDP描述示例如下：
```text
        v=0
        o=mhandley 2890844526 2890842807 IN IP4 126.16.64.4
        s=SDP Seminar
        i=A Seminar on the session description protocol
        u=http://www.cs.ucl.ac.uk/staff/M.Handley/sdp.03.ps
        e=mjh@isi.edu (Mark Handley)
        c=IN IP4 224.2.17.12/127
        t=2873397496 2873404696
        a=recvonly
        m=audio 49170 RTP/AVP 0
        m=video 51372 RTP/AVP 31
        m=application 32416 udp wb
        a=orient:portrait
```
会话名称和信息等文本记录是字节字符串，可以包含除0x00（Nul）、0x0a（ASCII换行符）和0x0d（ASCII回车符）之外的任何字节。序列CRLF（0x0d0a）用于结束记录，尽管解析器应该是宽容的，并且也接受以单个换行符终止的记录。默认情况下，这些字节字符串包含UTF-8编码的ISO-10646字符，但可以使用`“charset”`属性更改此默认值。

协议版本
```
v=0
```
`“v=”`字段给出会话描述协议的版本。没有次要版本号。

来源
```
o=<username> <session id> <version> <network type> <address type> <address>
```
`“o=”`字段提供会话发起人（其用户名和用户主机地址）以及会话id和会话版本号。

`<username>`是用户在发起主机上的登录名，如果发起主机不支持用户ID的概念，则为`“-”`。`<username>`不能包含空格。`<session id>`是一个数字字符串，`<username>、<session id>、<network type>、<address type>和<address>`的元组构成会话的全局唯一标识符。

`<session id>`分配的方法由创建工具决定，但有人建议使用网络时间协议（NTP）时间戳来确保唯一性[^1]。

`<version>`是本次公告的版本号。代理公告需要检测同一会话的几个公告中哪一个是最近的。同样，它的用途取决于用户创建工具，只要在修改会话数据时增加`<version>`。同样，建议（但不是强制性的）使用NTP时间戳。

`<network type>`是给出网络类型的文本字符串。最初，`“IN”`的定义是指“Internet”。`<address type>`是一个文本字符串，给出后面的地址类型。最初定义为`“IP4”`和`“IP6”`。`<address>`是从中创建会话的计算机的全局唯一地址。对于IP4的地址类型，这要么是机器的完全限定域名，要么是机器IPv4地址的点分十进制表示。对于IP6的地址类型，这要么是机器的完全限定域名，要么是机器IPv6地址的压缩文本表示。对于IP4和IP6，除非不可用，完全限定域名是**应该**给的形式，在这种情况下，可以替换全局唯一地址。本地IP地址**不得**用于SDP描述可能离开地址有意义的范围的任何上下文中。

通常，`“o=”`字段用作此会话描述版本的全局唯一标识符，并且除`<version>`外的子字段组合在一起来标识会话，而不考虑任何修改。


会话名称
```
s=<session name>
```       
`“s=”`字段是会话名称。每个会话描述必须有且只有一个`“s=”`字段，并且必须包含ISO10646字符（另请参见下面的`“charset”`属性）。

会议和媒体信息
```
i=<session description>
```
`“i=”`字段是有关会话的信息。每个会话描述最多只能有一个会话级别`“i=”`字段，每个媒体最多只能有一个`“i=”`字段。虽然可以省略，但对于会话公告不鼓励这样做，用于编写会话的用户界面应该要求输入会话信息有关文本。如果存在，则必须包含ISO10646字符（另请参见下面的`“charset”`属性）。
每个媒体定义也可以使用单独的`“i=”`字段。在媒体定义中，`“i=”`字段主要用于标记媒体流。因此，当单个会话具有相同媒体类型的多个不同媒体流时，它们最有可能有用。例如，两个不同的白板，一个用于幻灯片，另一个用于反馈和提问。

URI

```
u=<URI>
```

- URI是WWW客户端使用的统一资源标识符
- URI应该是指向有关会议的其他信息的指针
- 此字段是可选的，但如果存在，则应在第一个媒体字段之前指定
- 每个会话描述不允许超过一个URI字段

电子邮件地址和电话号码

```
e=<email address>
p=<phone number>
```
- 这些信息指定了会议负责人的联系信息。这不一定是创建会议公告的同一个人。
- 必须指定电子邮件字段或电话字段中的一个。额外的电子邮件和电话字段也是允许的。
- 如果存在这些字段，则应在第一个媒体字段之前指定它们。
- 可以为会话描述提供多个电子邮件或电话字段。
- 电话号码应采用传统的国际格式，即在前面加上`“+”`和国际国家代码。在国家/地区代码和电话号码的其余部分之间必须有一个空格或连字符（`“-”`）。如果需要，可以使用空格和连字符来分隔电话字段，以提高可读性。例如：`p=+44-171-380-7777 or p=+1 617 253 6011`。
-  电子邮件地址和电话号码都可以有一个可选的自由文本字符串与之关联，通常给出可能联系的人的姓名。如果存在，则应将其括在括号中。例如：`e=mjh@isi.edu (Mark Handley)`。
电子邮件地址和电话号码也允许使用RFC822名称引用约定。例如



------

***<font color=blue>版权声明：</font>本文翻译自<font color=blue>《[RFC2327](https://www.ietf.org/rfc/rfc2327.txt)》。</font>协议更新时间为1998。<font color=red>本文与原文档采用相同的版权许可。</font><font color=blue>转载请注明出处！！！</font>***

------

[^1]: Mills, D., "Network Time Protocol (version 3) specification and implementation", RFC 1305, March 1992.

[^2]: Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson, "RTP: A Transport Protocol for Real-Time Applications", RFC 1889, January 1996.

[^3]: Schulzrinne, H., "RTP Profile for Audio and Video Conferences with Minimal Control", RFC 1890, January 1996

[^4]: Handley, M., "SAP - Session Announcement Protocol", Work in Progress.

[^5]: V. Jacobson, S. McCanne, "vat - X11-based audio teleconferencing tool" vat manual page, Lawrence Berkeley Laboratory, 1994.

[^6]: The Unicode Consortium, "The Unicode Standard -- Version 2.0", Addison-Wesley, 1996.

[^7]: ISO/IEC 10646-1:1993. International Standard -- Information technol- ogy -- Universal Multiple-Octet Coded Character Set (UCS) -- Part 1: Architecture and Basic Multilingual Plane. Five amendments and a techn- ical corrigendum have been published up to now. UTF-8 is described in Annex R, published as Amendment 2.

[^8]: Goldsmith, D., and M. Davis, "Using Unicode with MIME", RFC 1641, July 1994.

[^9]: Yergeau, F., "UTF-8, a transformation format of Unicode and ISO 10646", RFC 2044, October 1996.

[^10]: ITU-T Recommendation H.332 (1998): "Multimedia Terminal for Receiving Internet-based H.323 Conferences", ITU, Geneva.

[^11]: Handley, M., Schooler, E., and H. Schulzrinne, "Session Initiation Protocol (SIP)", Work in Progress.

[^12]: Schulzrinne, H., Rao, A., and R. Lanphier, "Real Time Streaming Protocol (RTSP)", RFC 2326, April 1998.