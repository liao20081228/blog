---
title: Linux内核简介
tags: Linux内核
---

------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>《Linux 内核设计与艺术》。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------


# 1 Unix的特点
* 简洁
* 所有东西都抽象为文件
* Unix用C编写，可移植性好
* 进城创建迅速
* 进程间通信原语简单稳定

# 2 单内核与微内核
|　|原理|优点|缺点
|:--|:--|:--|:--|
|单内核|整个内核作为一个过程来实现，在一个大内核地址空间上运行。|简单、高效、可直接调用函数|一个功能的崩溃会导致整个内核无法使用。|
|微内核|内核按功能被划分成各个独立的过程，叫做服务器。每个过程独立的运行在自己的地址空间上|安全：内核的各种服务独立运行，一种服务挂了不会影响其他服务。|内核各个服务之间的调用涉及进程间的通信，比较复杂且效率低。|

　　
&emsp;&emsp;Linux的内核虽然是**基于单内核的**，但是经过这么多年的发展，也具备微内核的一些特征——体现了Linux实用至上的原则。主要有以下特征：

* 支持动态加载内核模块。
* 支持对称多处理（SMP）。
* 内核可以抢占（preemptive），允许内核运行的任务有优先执行的能力。
* 不区分线程和进程。
* 提供具有设备类的面向对象设备模型和热插拔时间，以及用户空间的设备文件系统sysfs。
* 抛弃了Unix的一些拙劣特性。
* 自由、开源。
# 3 内核版本号

* 从内核第一个0.01 版本发布到 1.0 版本。接下来是 0.02, 0.03, 0.10, 0.11, 0.12 (第一个 GPL 版本), 0.95, 0.96, 0.97, 0.98, 0.99，最后才到 1.0。
* 1.0发布之后，直到2.6版本之前，命名格式为 “A.B.C”：
	* 数字 A 是内核版本号，版本号只有在代码和内核的概念有重大改变的时候才会改变，历史上有两次变化：
		* 第一次是1994年的 1.0 版
		* 第二次是1996年的 2.0 版
		* 2011年的 3.0 版发布，但这次主版本号A的概念上并没有发生大的变化
	* 数字 B 是内核主版本号，主版本号根据传统的奇-偶系统版本编号来分配：
		* 奇数为开发版
		* 偶数为稳定版
	* 数字 C 是内核次版本号，次版本号是无论在内核增加安全补丁、修复bug、实现新的特性或者驱动时都会改变
* 2004年 2.6 版本发布之后，内核开发者觉得基于更短的时间为发布周期更有益，所以大约七年的时间里，内核版本号的前两个数一直保持是“2.6”，第三个数随着发布次数增加，发布周期大约是两三个月。考虑到对某个版本的bug和安全漏洞的修复，有时也会出现第四个数字。
* 2011年5月29号，Linus 宣布为了纪念Linux发布 20周年，在 2.6.39 版本发布之后，内核版本将升到 3.0 。Linux 继续使用在 2.6.0 版本引入的基于时间的发布规律，但是使用第二个数——例如在3.0发布的几个月之后发布3.1，同时当需要修复bug和安全漏洞的时候，增加一个数字（现在是第三个数）来表示，如 3.0.18。

>其它补充：
>* 内核版本命名第一次使用第四个数字是在 2.6.8 的 NFS 代码中出现一个严重的错误需要立即修复，然而还没有足够多的其它改变可以发布一个新的版本（也就是2.6.9），所以，2.6.8.1 发布了，仅仅修正了那个错误。直到 2.6.11，这种版本命名策略被官方正式采纳。接着，这种通过改变第四个数字来显示修复主要bug和安全补丁而发布新内核的做法，成为一种普遍的做法。
>* 在正式发布之前，一般都冠以“待发布”（release candidates)字样，通过在内核版本的普通数字之后添加后缀 “rc”。
>* 有些时候，版本号后面有类似于 “tip”这样的后缀，表明另一个开发分支，这些分支通常（但不总是）是一个人开始发起的。举例来说，“ck” 代表 Con Kolivas，“ac” 代表 Alan Cox 等等。有时，字母和内核建立分支的主要开发领域相关，例如“wl” 表示该分支主要测试无线网络的。同时，不同的发行版也会根据需要有自己的后缀。

# 4 内核源码的目录结构

|目录|说明|
|:--|:--|
|arch|特定体系结构相关的代码,每种平台一个目录|
|arch/\$ARCH/mach-xxxx|具体机器或主板相关的代码|
|arch/\$ARCH/include/asm|体系结构相关的头文件|
|arch/\$ARCH/boot/dts|设备树，从3.0以后才有|
|block|	块设备I/O层次|
|crypo|	加、解密库，压缩和CRC校验算法|
|COPYING|版权声明。
|CREDITS|Linux主要贡献者名单
|Documentation，README|内核源码文档及帮助文件|
|drivers|设备驱动程序|
|firmware|使用某些驱动程序而需要的设备固件|
|fs|VFS和各种文件系统|
|include|内核头文件，需要提供给外部模块使用。|
|init|内核引导和初始化|
|ipc|进程间通信代码|
|kernel|像调度程序这样的核心子系统，与平台有关的放在/arch/\$ARCH/kernel
|Kconfig, Kbuild, Makefile, scripts| 用于内核构建的配置文件、脚本等。
|lib|	内核函数库|
|mm	|内存管理子系统和VM，与平台有关的放在/arch/\$ARCH/kernel|
|MAINTAINERS|维护者名单。
|net|	网络子系统
|samples|	示例，示范代码
|scripts|	编译内核所用的脚本
|security|	Linux 安全模块 SElinux
|sound|	音频子系统
|tools|在Linux开发中用于性能测试、自测试等常用工具
|usr|	早期用户空间代码（所谓的initramfs）
|virt|	虚拟化基础结构

------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>《Linux 内核设计与艺术》。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------
