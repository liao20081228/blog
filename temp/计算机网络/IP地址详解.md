---
title: IP地址详解
tags: 计算机网络
---

------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------

<style>table{word-break:initial;}</style>




# 1 IPv4
## 1.1 IP地址
**IP地址**：是IP协议提供的一种统一的地址格式，它为互联网上的每一个网络和每一台主机分配一个逻辑地址，以此来屏蔽物理地址的差异。IP地址由32位二进制数组成，可以使用点分十进制来表示。如："192.168.1.1"。

## 1.1 分类
最初，IP地址根据网络ID的不同分为5种类型，A类地址、B类地址、C类地址、D类地址和E类地址。A、B、C类IP地址包括网络号和主机号。同一个网络上的不同主机使用同一网络ID，不同主机ID。**D类与E类IP不区分网络号与主机号**。

![图1](https://www.github.com/liao20081228/blog/raw/master/图片/IP地址详解/图1.jpg)

- A类：8位网络号24位主机号，0.0.0.0~127.255.255.255，主要用于大型网络。
- B类：16位网络号16位主机号，128.0.0.0~191.255.255.255，主要用于中型网络。
- C类：24位网络号8位主机号，192.0.0.0~223.255.255.255，主要用于小型网络。
- D类：224.0.0.0~239.255.255.255，主要用于组播。
- E类：240.0.0.0~255.255.255.255，保留用于实验。

>1. 秘诀：A B C D E，起始地址相差128、64、32、16。
>2. 并非所有IP都可以分配，**要除去特殊IP、回环IP、链路本地IP**。

## 1.2 子网划分与CIDR
### 1.2.1 子网划分
Internet组织机构定义了五种IP地址，有A、B、C三类地址。A类网络有126个，每个A类网络可能有16777214台主机，它们处于同一广播域。而在同一广播域中有这么多节点是不可能的，网络会因为广播通信而饱和，结果造成16777214个地址大部分没有分配出去。因此可以把基于每类的IP网络进一步分成更小的网络，每个子网由路由器界定并分配一个新的子网网络地址,**子网地址是借用基于每类的IP地址的主机号的一部分创建的**。


RFC950定义了子网掩码的使用，子网掩码是一个32位的2进制数，其对应网络地址的所有位置都为1，对应于主机地址的所有位置都为0。由此可知，A类网络的默认子网掩码是255.0.0.0，B类网络的默认子网掩码是255.255.0.0，C类网络的默认子网掩码是255.255.255.0。将子网掩码和IP地址按位进行逻辑“与”运算，得到IP地址的网络地址，剩下的部分就是主机地址，从而区分出任意IP地址中的网络地址和主机地址。
- 子网掩码常用点分十进制表示，如255.255.255.0
- 还可以用CIDR的网络前缀法表示掩码，即“/<网络地址位数>；”。如138.96.0.0/16表示B类网络138.96.0.0的子网掩码为255.255.0.0。

### 1.2.2 CIDR
**CIDR**（无类别域间路由，Classless Inter-Domain Routing）是一个在Internet上创建附加地址的方法，这些地址提供给因特网服务提供商（ISP），再由ISP分配给客户。CIDR将路由集中起来，使一个IP地址代表主要骨干提供商服务的几千个IP地址，从而减轻Internet路由器的负担。

**CIDR 对原来用于分配A类、B类和C类地址的有类别路由选择进程进行了重新构建**。CIDR用 13-27位长的前缀取代了原来地址结构对地址网络部分的限制（3类地址的网络部分分别被限制为8位、16位和24位）。在管理员能分配的地址块中，主机数量范围是32-500,000，从而能更好地满足机构对地址的特殊需求。

CIDR 地址中包含标准的32位IP地址和有关网络前缀位数的信息。以CIDR地址222.80.18.18/25为例，其中“/25”表示其前面地址中的前25位代表网络部分，其余位代表主机部分。

**CIDR建立于“超级组网”的基础上，“超级组网”是“子网划分”的派生词，可看作子网划分的逆过程**。子网划分时，从地址主机部分借位，将其合并进网络部分；而在超级组网中，则是将网络部分的某些位合并进主机部分。这种无类别超级组网技术通过将一组较小的无类别网络汇聚为一个较大的单一路由表项，减少了Internet路由域中路由表条目的数量。

例如一个ISP被分配了一些C类网络，这个ISP准备把这些C类网络分配给各个用户群，已经分配了三个C类网段给用户。如果没有实施CIDR技术，ISP的路由器的路由表中会有三条下连网段的路由条目，并且会把它通告给Internet上的路由器；通过实施CIDR技术，我们可以在ISP的路由器上把这三个网段198.168.1.0,198.168.2.0,198.168.3.0汇聚成一条路由198.168.0.0/16.这样ISP路由器只向Internet通告198.168.0.0/16这一条路由，大大减少了路由表的数目，从而为网络路由器节省出了存储空间。 值得注意的是,使用CIDR技术汇聚的**网络地址的比特位**必须是一致的，如上例所示，如果上例所示的ISP连接了一个172.178.1.0网段,这些网段路由将无法汇聚，无法实现CIDR技术。


>通配符掩码：也用点分十进制表示，用在路由中，1表示模糊匹配，0表示精确匹配。
>注意通配符掩码不是所谓的反掩码，某些时候可能一样。**事实上根本就没有所谓的反掩码**。
## 1.2 特殊IP



|网络号|主机号| IP|用途|
|--|--|--|--|
|全0|全0|0.0.0.0|向DHCP请求IP时表示本主机，只能作为源地址；<br>在服务端表示监听本机所有IP；<br>在路由表中表示未知目标的默认路由|
|全0 |正常|0.X.X.X|本网内特定的主机，只能作为源地址。
|全0|全1|0.255.255.255|本网内特定的主机，只能作为源地址
|全1|全0|不存在|因为A、B、C类的网络号都不能全为1|
|全1|正常|不存在|因为A、B、C类的网络号都不能全为1|
|全1|全1|255.255.255.255|受限广播地址，在本网络（或子网）内部进行广播，只能做目标地址。
|正常|全1||直接广播地址，向某网络（或子网）的所有主机广播，只能做目标地址
|正常|正常||某网络的某主机|
|正常|全0||网络地址，用于标识网络，不能分配给主机，不能作为数据的源地址和目的地址。

>如果划分了子网（只有在正常的A、B、C类网络才会划分子网）：
>1. 子网号不能全0：第一个子网标识符与主网络的网络地址重叠，但在实施了CIDR后则无关系。
>2. 子网号不能全1：最后一个子网的广播地址与主网络的广播地址重叠，但在实施了CIDR后则无关系。
>3. 主机号全0：子网标识
>4. 主机号全1：子网直接广播地址
>5. 255.255.255.255：本子网的受限广播地址。


 



## 1.3 私有IP
公有IP，由inter NIC（因特网信息中心）负责。这些IP地址分配给注册并向Inter NIC提出申请的组织机构，再由机构分配给用户，不同用户可以通过它直接访问因特网。  　　

私有IP的出现是为了解决公有IP地址不够用的情况。从A、B、C三类IP地址中拿出一部分作为私有IP地址，这些IP地址不能被路由到Internet骨干网上，Internet路由器也将丢弃该私有地址。如果私有IP地址想要连至Internet，需要将私有地址转换为公有地址。这个转换过程称为网络地址转换（NAT），通常使用路由器来执行NAT转换。

私有IP范围如下：
- A类：10.0.0.0~10.255.255.255 即10.0.0.0/8，可用10.0.0.1到10.255.255.254
- B类：172.16.0.0~172.31.255.255 即172.16.0.0/12，可用172.16.0.1到172.31.255.254
- C类：192.168.0.0~192.168.255.255 即192.168.0.0/16，可用192.168.0.1到192.16.255.254
 
 ## 1.4 回环IP
 127.0.0.0~127.255.255.255，环回地址（Loopback Address）是用于网络软件测试以及本机进程之间通信的特殊地址。 其中127.0.0.0和127.255.255.255不能分配。
 
 ## 1.5 链路本地IP
 链路本地地址是设备在本地网络中通讯时用的地址，网段为169.254.0.0～169.254.254.255。当DHCP服务器故障，或者DHCP超时，不致于设备没有IP而造成连接不上。在本地网络通讯的，不通过路由器转发，因此网关为0.0.0.0。它的掩码为255.255.0.0。



# 2 IPv6

IPv6是英文“Internet Protocol Version 6”（互联网协议第6版）的缩写，是互联网工程任务组（IETF）设计的用于替代IPv4的下一代IP协议，其地址数量号称可以为全世界的每一粒沙子编上一个地址 。

由于IPv4最大的问题在于网络地址资源有限，严重制约了互联网的应用和发展。IPv6的使用，不仅能解决网络地址资源数量的问题，而且也解决了多种接入设备连入互联网的障碍  。

互联网数字分配机构（IANA）在2016年已向国际互联网工程任务组（IETF）提出建议，要求新制定的国际互联网标准只支持IPv6，不再兼容IPv4。 


IPv6地址总共有128位，为了便于人工阅读和输入，和IPv4地址一样，IPv6地址也可以用一串字符表示。IPv6地址使用**冒分16进制**表示，IPv6地址划分成8个块，每块16位，块与块之间用“:”隔开。如下所示：

![图2](https://www.github.com/liao20081228/blog/raw/master/图片/IP地址详解/图2.jpg)


对于多个地址块为0的情况时，可以使用“::”号，进行化简。化简原则：

+ 全0块“0000”，可以化简为“0”
+ 多个全0块，可以化简为“::”
+ 一个IPv6地址中只能出现一个“::”，出现多个全0块时，“::”要化简最长的一段，没有最长的要就近（左）
+ “::”可以出现在地址开头或结尾

具体示例如下：

![图3](https://www.github.com/liao20081228/blog/raw/master/图片/IP地址详解/图3.jpg)

# 2.1 分类



  









------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------
