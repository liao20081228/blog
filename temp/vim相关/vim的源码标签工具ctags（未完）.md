---
title: vim的源码标签工具ctags（未完）
tags: vim
---

------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>《ctags 官方文档》。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------

<style>table{word-break:initial;}</style>


# 1 简介
&emsp;&emsp;ctags和etags程序（统称为ctags，除非特别的区分）为源文件中的各种语言对象生成索引（或叫做“tag”）文件。此tag文件允许通过文本编辑器或其他实用程序快速轻松地找到这些语言对象。一个“tag”表示一个语言对象的索引入口。

&emsp;&emsp;此外，ctags可以生成交叉引用文件，该文件以人类可读的形式列出在一组语言文件中找到的各种源对象的有关信息。

&emsp;&emsp;许多编辑器都支持“tag”索引文件，允许用户找到源文件中出现的与指定名称有关的对象，并跳转到定义名称的文件和行。 例如：Vi及变种（如Elvis，Vim，Vile，Lemmy），CRiSP，Emacs，FED，JEdit，Mined， WorkSpace，X2，Zeus。

&emsp;&emsp;Ctags能够为许多不同语言中的生成不同类型的标签。有关支持的语言和每种语言所支持的语言对象类型，请参阅`--list-languages`和`--list-types`选项。


# 2 安装
* 手动编译安装
  * 从<http://http://ctags.sourceforge.net//>下载源码
  * 解压后进入源码根目录
  * 配置：`./configure --with-flex ` (注：如果平台是Linux,最好带上 --with-flex选项)
  * 编译：`make ` (注：我没有遇到错误)
  * 安装：`make install `
* 下载已编译的二进制包
  * `sudo apt install ctags` 



# 3 配置
* 修改vim配置文件vimrc.你可以修改/etc/vimrc使用所有用户都使用本配置文件，当然你还可以修改~/.vimrc

# 4 使用

# 5 命令
**命令** ：ctags [options] [file(s)]
&emsp;&emsp;&emsp; etags [options] [file(s)]
**描述** ：为指定的文件建立tags数据库。

# 6 源文件
&emsp;&emsp;除非指定了`--language-force`选项，否则将根据文件名到语言的映射自动选择每个源文件的语言。可以使用`--list-maps`选项显示对文件名与语言对应的的映射关系，并且可以使用`--langmap`选项更改这些映射关系。在支持ctags的平台上，如果文件名未映射到语言并且文件可执行，则检查文件的第一行以查看文件是否为一个可识别语言的“＃！”脚本。
&emsp;&emsp;默认情况下，将忽略所有其他文件名。 这允许对单个目录的所有文件（例如`ctags * `）或整个源目录树中的所有文件（例如`ctags -R`）运行ctags，因为只有名称映射到语言的那些文件才会 被扫描。

&emsp;&emsp;.h扩展名映射到C ++ 文件而不是C文件的原因是因为在C ++ 中使用.h扩展名是很常见的，并且不会产生有害的结果

# 7  选项
* 尽管选项很多，但最常用的默认方式是不带任何选择（如`CTAGS *`或`ctags -R`），这将在当前目录下为所有可识别的源文件创建一个的tag数据库文件。下面描述的选项用于定制定制以满足特殊需要。

* 注意：将短选项与其参数用空格分开是可选的。

* 注意：长选项（以--开头的选项）的布尔参数（=yes|no）可以省略，这时认为使用了=yes。（比如 --sort等同于--sort=yes），此外`yes 、1 、on` 是同义词，`no 、0 、off`也是同义词。

* 某些选项在etags中被忽略，只能用于etags（请参阅-e选项）。 将注意到这些选项。

* 大多数选项可以出现在命令行的任何位置，仅影响该选项后面的那些文件。但是，**一些选项必须出现在第一个文件名之前，需要注意**。
* 采用语言名称作为参数的选项将接受大写和小写的名称。有关内置语言名称的完整列表，请参阅`--list-languages`选项。

|短选项|长选项|描述
|:--|:--|:--|
|-a  |--append[=yes\|no]|生成的tags文件添加到已存在的tags文件中或者覆盖它，默认覆盖。**此选项必须出现在第一个文件名之前**。
|-B||使用向后搜索模式（例如，？Pattern？）。 在etags模式中忽略
|-e||启用etags模式，创建一个用于Emacs的tag文件。此外，如果通过包含字符串“etags”的名称调用ctags（通过重命名或创建可执行文件的链接）也将启用etags模式。 **此选项必须出现在第一个文件名之前**。
|-f tagfile||使用tagfile作为tag文件的名字（默认为“tags”，在etags模式下默认为“TAGS”）。如果tagfile为“-”，则tag文件将输出到标准输出;如果tagfile存在且其第一行包含除有效标记之外的其他内容，则Ctags将拒绝接受命令。这在输入了错误的命令时很有用，比如`ctags -f *.c`，如果没有此特性就会覆盖掉第一个C文件。它也将拒绝接受以“-”字符开头的多字符文件名，因为这可能意味着您省略了tags文件名，并且尝试将下一个选项作为文件名。如果你真的想以“-”开头，请加上“./”。**此选项必须出现在第一个文件名之前**。 如果多次指定此选项，则仅应用最后一个选项。|
|-F||使用前向搜索模式（例如，/pattern/）（默认）。 在etags模式中忽略|
| -h list||list是用`.`分隔的头文件的扩展名的列表。没有扩展名的头文件用后面不跟任何非`.`字符的`.`表示，如(".", "..x", ".x.")。此选项仅影响如何解释特定类型的tag的范围（全局可见或仅在定义它们的文件中可见）;它不会将扩展名映射到任何特定语言。位于非头文件中以及不能从另一个文件看到（例如，链接到）的任何tag都被认为具有文件限制（例如，static）范围。头文件中出现的任何tag都不会被视为具有文件限制范围。如果列表中的第一个字符是加号，则列表中的扩展名将附加到当前列表中;否则，该列表将替换当前列表。另请参见`--file-scope`选项。默认列表是".h.H.hh.hpp.hxx.h++.inc.def"。要恢复默认列表，请指定`-h default`。请注意，如果为此选项提供的扩展尚未映射到特定语言，则还需要使用`--langmap`或`--language-force`选项。
|-I identifier-list||指定在解析C和C++源文件时专门处理的标识符列表。此选项特地用来处理使用预处理宏所产生的特殊情况。当列出的标识符是简单标识符时，在解析源文件期间将忽略这些标识符。如果标识符后缀为“+”，则ctags还将忽略源文件中紧跟该标识符的任何括号内的参数列表。如果两个标识符用“=”分隔，解析时将用后一个标识符替换前一个标识符。标识符列表可以直接在命令行上提供，也可以从单独的文件中读取。如果标识符列表的第一个字符是'@'，'.'或路径分隔符（“/”或“\”），或前两个字符指定一个驱动器（例如，“C：”），将被解释为从中读取标识符列表的文件名，该文件中每个输入行一个。否则，标识符列表是要被特殊处理的标识符（或标识符对），由逗号或由空白分隔（这时应该用引号括起来以使整个列表作为一个命令行参数）。可以提供多个-I选项。要清除标识符列表，标识符列表为单个短划线（“-”）。
|-L file||从file中读取应生成标签的文件名列表。如果file指定为“-”，则从标准输入读取文件名。使用此选项读取的文件名将在命令行中出现的文件名之后处理。此输入也接受选项。如果多次指定此选项，则仅最后一个有用。注意：为了使文件名可以含有空格（但尾随空白从行末剥离），文件被以面向行的模式读入，新行是唯一的分隔符，尾部不要跟随空白;如果包含在输入中，这可能会影响解析选项的方式。
|-n|--excmd=number|
|-N|--excmd=pattern|
|-o tagfile|-f tagfile|
|-R|--recurse|
|-u |--sort=no|
|-V |--verbose|
|-w||为了向后兼容SVR4 Unix的ctags，此选项将被忽略。
|-x||以人类可读的表格形式将tag文件打印到标准输出，而不生成tag文件。输出中包含的信息包括：标签名称、标签种类; 行号、文件名和该行代码。不生成tag文件，将忽略影响tag文件输出的所有选项。**此选项必须出现在第一个文件名之前**
||--etags-include=file|在tag文件中包含对file的引用，可以根据需要多次指定该选项。这支持Emacs使用includes引入其他tag文件能力，仅在etags模式下可用
|&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;|&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&ensp;|





------

&emsp;&emsp;<font color=blue>**_版权声明_**</font>：本文参考了<font color=blue>《ctags 官方文档》。</font><font color=red>未经作者允许，<font color=blue>严禁用于商业出版</font>，否则追究法律责任。网络转载请注明出处，这是对原创者的起码的尊重！！！</font>

------
